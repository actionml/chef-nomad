## Generated by Chef!

bind_addr = "<%= @bind_addr %>"
data_dir = "<%= @data_dir %>"

region = "<%= @region %>"
datacenter = "<%= @datacenter %>"

advertise {
  http = "<%= @advertise_address %>:<%= @advertise_ports['http'] %>"
  rpc = "<%= @advertise_address %>:<%= @advertise_ports['rpc'] %>"
  serf = "<%= @advertise_address %>:<%= @advertise_ports['serf'] %>"
}

consul {
  # host:port
  address = "<%= @consul['address'] %>"
  server_service_name = "<%= @consul['server_service_name'] %>"
  client_service_name = "<%= @consul['client_service_name'] %>"
  server_auto_join = <%= @consul['server_auto_join'] %>
  client_auto_join = <%= @consul['client_auto_join'] %>
}

server {
  enabled = <%= @server['enabled'] %>
  <% if @server['enabled'] -%>
  bootstrap_expect = <%= @server['bootstrap_expect'] %>
  <% end -%>
}

client {
  enabled = <%= @client['enabled'] %>
  node_class = "<%= @client['node_class'] %>"
  network_speed = <%= @client['network_speed'] %>

  chroot_env {
    <% (@client['chroot_env'] || {}).each do |l, r| -%>
    "<%= l %>" = "<%= r %>"
    <% end -%>
  }

  reserved {
    memory = <%= @client['reserved']['memory'] %>
    cpu = <%= @client['reserved']['cpu'] %>
    disk = <%= @client['reserved']['disk'] %>
    reserved_ports = "<%= @client['reserved']['reserved_ports'].join(", ") %>"
  }

  meta {
    <% (@client['meta'] || {}).each do |l, r| -%>
    "<%= l %>" = "<%= r %>"
    <% end -%>
  }

  options {
    <% (@client['options'] || {}).each do |l, r| -%>
    "<%= l %>" = "<%= r %>"
    <% end -%>
  }
}
